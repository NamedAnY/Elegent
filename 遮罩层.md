<style>
body {
  background-color: #fdf6e3; /* 护眼背景 */
  color: #333;
  font-family: "Microsoft YaHei", Arial, sans-serif;
  line-height: 1.6;
}

h1 {
  font-size: 28px;
  color: #3a5fcd; /* 柔和蓝紫 */
  border-left: 6px solid #ffb347;
  padding-left: 12px;
  margin-top: 30px;
  margin-bottom: 15px;
}

h2 {
  font-size: 20px;
  color: #5c3d99; /* 深紫色 */
  margin-top: 20px;
  margin-bottom: 12px;
}

.section {
  background: #f0f9f6; /* 淡绿色卡片 */
  border: 1px solid #d3e0dc;
  border-radius: 10px;
  padding: 18px 20px;
  margin-bottom: 25px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.08);
}

ol {
  padding-left: 22px;
}

code {
  background: #f5e6cc;
  color: #8b0000;
  padding: 3px 6px;
  border-radius: 5px;
  font-size: 90%;
}
</style>

# 禁止用户点击指定区域

<div class="section">

该方法常用于 **麻将洗牌**、**动画播放** 等场景，防止玩家在不合时宜的时机点击屏幕上的按钮或道具。

</div>

## 实现步骤
<div class="section">

### 1. 创建遮罩层
- 在场景中创建 `box_mask`，并将 **left / right / top / bottom** 全部设为 `0`，以覆盖全屏。  

---

### 2. 添加事件拦截
- 给 `box_mask` 添加 `MOUSE_DOWN` 事件监听，在回调函数中调用 `e.stopPropagation()` 阻止事件向下传递。  

代码示例：  

```ts
private onDownMask(e: Laya.Event) {
    if (this.isPerfectCombo) 
        return;

    // 不让子节点的鼠标事件穿透到父节点
    e.stopPropagation();
}
```

### 3. 控制可点击状态

- 通过设置 box_mask.visible 来决定是否允许点击。

- true → 禁止点击（遮罩层生效）

- false → 允许点击（遮罩层关闭）

代码示例：  

```ts
private setMask(b: boolean) {
    this.box_mask.visible = b;
}
```

</div> 